#Kage Library  - ks
#$lib_ver$:0.0.3

_k_loaded_ks(){
   local null
}

_k_ks_help() {
    local help="Library ks's  help
Usage) ${FUNCNAME} "
    [  "${FUNCNAME}_${_K_XCODE_HELP}" == "$1" ] && _k_help  && return 0
    echo "Library : ks "
}


_k_ks(){
    [ -n "$_K_LIB" ] || error_return "_K_LIB not found" || return 1
    local help="Library ks's start function
Usage) ${FUNCNAME} "
    [  "${FUNCNAME}_${_K_XCODE_HELP}" == "$1" ] && _k_help  && return 0
    ### start(open) library code here ###
}

#include misc
_k_ks_head_rhel() {
  local USB_DEV OS_NAME line KS_ETH_0 KS_ETH_1 USB_MEDIA_DEV KICKSTART_FILE MGMT KS_FILE USB_MOUNT media_type
  USB_DEV=$1
  OS_NAME=$2
  MGMT=$3
  USB_MOUNT=$4
  KS_FILE=$5

  if [ "$(basename $USB_DEV)" == "cdrom" -o "$(basename $USB_DEV)" == "dvd" ]; then
    USB_MOUNT="$USB_MOUNT/ks"
    [ -d $USB_MOUNT ] || mkdir -p $USB_MOUNT
    os_disk=sda
    clearpart="clearpart --initlabel --all"
    media_type=DVD
  else
    [ "$OS_NAME" == "rhel6.1" -o "$OS_NAME" == "rhel6.2" ] && os_disk=sdb || os_disk=sda
    clearpart="clearpart  --all --drives=$os_disk"
    media_type=USB
  fi

  echo
  echo "Make a kickstart of RHEL ($media_type)"
  echo

  ## COMMON ##
  #  KEY_VAL="60f0ed26617b24ed"
  if _k_misc_check_value "$KEY" "skip" "";  then
    KEY_VAL="--skip"
  else
    KEY_VAL=$KEY
    PKG_CLUSTER="@cluster-storage
@clustering"
  fi

  ## RHEL 5.x ##
  if _k_misc_check_value "$OS_NAME" rhel5.3 rhel5.5; then
      lang="lang en_US

#Language modules to install
langsupport  --default=en_US "

      mouse="mouse generic3ps/2"
      auth="auth  --useshadow  --enablemd5"
      ignoredisk="ignoredisk --drives=$(basename ${USB_DEVICE_REAL}),$(basename ${USB_DEVICE_REAL})1,$(basename ${USB_DEVICE_REAL})2"

  ## RHEL 6.x ##
  elif _k_misc_check_value "$OS_NAME" rhel6.1 rhel6.2 rhel6.3; then
      lang="lang en_US.UTF-8"
      auth="auth  --useshadow  --passalgo=md5"
  fi
  
  KS_ETH_0="ks_eth0=\"10.4.0.${MGMT}\""
  [ -n "$ETH1_IP" ] && KS_ETH_1="ks_eth1=\"$ETH1_IP\"" || KS_ETH_1="ks_eth1=\"10.5.0.${MGMT}\""

  for hs_raid in hr sr; do
    [ "sr" == "$hs_raid" ] && o_md=1 || o_md=0
    KICKSTART_FILE=${USB_MOUNT}/${OS_NAME}.mgmt${MGMT}_${hs_raid}.cfg

    # Using kickstart file
    if [ -n "$KS_FILE" ]; then
        [ -f $KS_FILE.${MGMT} ] || error_exit "File($KS_FILE) not found"
        cp -f $KS_FILE.${MGMT} $KICKSTART_FILE
        continue
    fi 

    # Create Kickstart file
    if [ "$(basename $USB_DEV)" == "dvd" -o "$(basename $USB_DEV)" == "cdrom" ]; then
       INSTALL_MEDIA_PART=cdrom
    else
       if [ "sr" == "$hs_raid" ]; then
         [ "$(basename $USB_DEV)" == "auto" ] && USB_DEV_STR=/dev/sde1 || USB_DEV_STR="$USB_DEV"
       else
         if _k_misc_check_value "$OS_NAME" "rhel6.1" "rhel6.2" "rhel6.3" ; then
           [ "$(basename $USB_DEV)" == "auto" ] && USB_DEV_STR=/dev/sda1 || USB_DEV_STR="$USB_DEV"
         else
           [ "$(basename $USB_DEV)" == "auto" ] && USB_DEV_STR=/dev/sdc1 || USB_DEV_STR="$USB_DEV"
         fi
       fi

       USB_DEVICE_REAL=$(echo $USB_DEV_STR | sed -e 's/1//g')
       USB_MEDIA_DEV="$ignoredisk
harddrive --partition=$(basename ${USB_DEVICE_REAL}2) --dir=/$OS_NAME"
       INSTALL_MEDIA_PART="$USB_MEDIA_DEV"
    fi

    cat << EOF > $KICKSTART_FILE
#Generated by Kickstart Configurator
#
# Modified for ACE kickstart installations
#
# mgmt{$MGMT} kickstart file
# 10.10.0.3 - management server IP address (10.0.0.3)
# /images/${OS_NAME} - distribution tree
#
#Install Red Hat Linux instead of upgrade
install

#Installation Number 
key $KEY_VAL

#System  language
$lang

#System keyboard
keyboard us

#System mouse
$mouse

#Sytem timezone
timezone --utc Etc/UTC

#Root password
rootpw --iscrypted \$1\$4YWFwSCe\$vZTKEavMP4n/laZGBsgAF1

#Reboot after installation
#reboot

#Use text mode install
text

#Installation Media Part
$INSTALL_MEDIA_PART

#System bootloader configuration
bootloader --location=mbr  --driveorder=$os_disk

#Clear the Master Boot Record
zerombr yes

#Partition clearing information
$clearpart

#Disk partitioning information
EOF

    if [ "$o_md" == "1" ]; then
        cat << EOF >> $KICKSTART_FILE
part swap --fstype swap --size=12288 --asprimary --ondisk=sda
part swap --fstype swap --size=12288 --asprimary --ondisk=sdb
part raid.01 --size=300 --asprimary  --ondisk=sda
part raid.02 --size=300 --asprimary  --ondisk=sdb
part raid.03 --size=30000 --grow --asprimary  --ondisk=sda
part raid.04 --size=30000 --grow --asprimary  --ondisk=sdb
raid /boot --fstype ext3 --level RAID1 raid.01 raid.02 --device=md0
raid / --fstype ext3 --level RAID1 raid.03 raid.04 --device=md1
EOF
    else

        if [ "$HDD_TYPE" == "ssd" ]; then
            cat << EOF >> $KICKSTART_FILE
part swap --fstype swap --size 8196 --asprimary --ondisk=$os_disk
part /boot --fstype ext3 --size 100 --asprimary  --ondisk=$os_disk
part / --fstype ext3 --size 32768 --asprimary --ondisk=$os_disk
EOF
        else
            cat << EOF >> $KICKSTART_FILE
part swap --fstype swap --size 24576 --asprimary --ondisk=$os_disk
part /boot --fstype ext3 --size 300 --asprimary  --ondisk=$os_disk
part / --fstype ext3 --size 30000 --grow --asprimary --ondisk=$os_disk
EOF
        fi

    fi

    cat << EOF >> $KICKSTART_FILE

#System authorization infomation
$auth

#Network information
#network --bootproto=dhcp --device=eth0 --onboot=on

#Firewall configuration
firewall --disabled

# Run the Setup Agent on first boot
firstboot --disable

# Installation logging level
logging --level=info

# SELinux configuration
selinux --disabled

#Do not configure XWindows
xconfig --startxonboot
EOF

      # Package install information
      if _k_misc_check_value "$OS_NAME" "rhel6.1"; then
          _k_ks_packages_rhel >> $KICKSTART_FILE
      elif _k_misc_check_value "$OS_NAME" "rhel6.2"; then
          _k_ks_packages_rhel >> $KICKSTART_FILE
      elif _k_misc_check_value "$OS_NAME" "rhel6.3"; then
          _k_ks_packages_rhel >> $KICKSTART_FILE
      else
          _k_ks_packages_rhel >> $KICKSTART_FILE
      fi

       # Tail 
       _k_ks_tail_rhel  >> $KICKSTART_FILE
       chmod 644 $KICKSTART_FILE
  done

}


_k_ks_dvd_iso_rhel5x() {
cat << EOF
cat > /root/ace.sh << EOF_RHEL
while [ true ]; do
   df -h /mnt/sysimage | grep sysimage && [ "ok" == "\\\$(
   [ -d /mnt/sysimage/images ] || mkdir -p /mnt/sysimage/images
   [ -d /mnt/source/icr ] && cp -fra /mnt/source/icr /mnt/sysimage/images
   cp -fra /mnt/source/ace /mnt/sysimage/images && echo ok
   # Make ISO file
   dvd_mount=/mnt/source
   output_iso_file=/images/$OS_NAME/ace-${VERSION}-${RELEASE}-${OS_NAME}-server-x86_64-dvd.iso
   [ -d \\\$(dirname \\\$output_iso_file) ] || mkdir -p \\\$(dirname \\\$output_iso_file)
   tmp_isolinux=\\\$(mktemp -d /tmp/isolinux.XXXXXX)
   cp -fra \\\$dvd_mount/isolinux \\\$tmp_isolinux
   mount -o bind \\\$tmp_isolinux/isolinux \\\$dvd_mount/isolinux
   mkisofs -b isolinux/isolinux.bin -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -input-charset=UTF-8 -output-charset=UTF-8 -R -J -T -v -x "lost+found" -o \\\$output_iso_file \\\$dvd_mount
)" ]  && break || echo waiting
sleep 10
done | tee /root/pre-install.2.log
EOF_RHEL
sh /root/ace.sh &
EOF
}

_k_ks_dvd_iso_rhel6x() {
cat << EOF
[ -d /mnt ] || mkdir -p /mnt
mount -t iso9660 /dev/cdrom /mnt
[ -d /images ] || mkdir -p /images
[ -d /mnt/icr ] && cp -fra /mnt/icr /images
[ -d /mnt/ace ] && cp -fra /mnt/ace /images
# Make ISO file
dvd_mount=/mnt
output_iso_file=/images/$OS_NAME/ace-${VERSION}-${RELEASE}-${OS_NAME}-server-x86_64-dvd.iso
[ -d \$(dirname \$output_iso_file) ] || mkdir -p \$(dirname \$output_iso_file)
tmp_isolinux=\$(mktemp -d /tmp/isolinux.XXXXXX)
cp -fra \$dvd_mount/isolinux \$tmp_isolinux
mount -o bind \$tmp_isolinux/isolinux \$dvd_mount/isolinux
mkisofs -b isolinux/isolinux.bin -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -input-charset=UTF-8 -output-charset=UTF-8 -R -J -T -v -x "lost+found" -o \$output_iso_file \$dvd_mount
umount /mnt
EOF
}

_k_ks_usb_iso() {
cat << EOF
mount /dev/$(basename ${USB_DEVICE_REAL}2) /mnt
mkdir -p /images
[ -d /mnt/3rd ] && cp -fra /tmp/3rd /images
cp -fra /mnt/ace /images
mkdir -p /images/$OS_NAME
cp /mnt/$OS_NAME/*.iso /images/$OS_NAME
umount /mnt
EOF
}

_k_ks_tail_rhel() {
    local USB_DEV OS_NAME
    USB_DEV=$1
    OS_NAME=$2

    cat << EOF

%pre
echo This is the pre script
EOF

    #if _k_misc_check_value "$(basename $USB_DEV)" "cdrom" "dvd" ; then
    #    _k_misc_check_value "$OS_NAME" "rhel6.1" "rhel6.2" "rhel6.3" || _k_ks_dvd_iso_rhel5x
    #fi

    cat << EOF
echo This is the post script
%post

export PATH=/sbin:/usr/sbin:\$PATH

exec >& /root/post-install.log
set -x
EOF

    if _k_misc_check_value "$(basename $USB_DEV)" "cdrom" "dvd" ; then
        _k_misc_check_value "$OS_NAME" "rhel6.1" "rhel6.2" "rhel6.3" && _k_ks_dvd_iso_rhel6x ||  _k_ks_dvd_iso_rhel5x
    else
        _k_ks_usb_iso
    fi

    cat << EOF 
# turn off some broken stuff
for chkl in \$(chkconfig --list | grep ":on" | awk '{print \$1}'); do
     [ -f /etc/init.d/\$chkl ] && chkconfig --level 123456 \$chkl off
done

for chkl in atd acpid crond haldaemon ipmi irqbalance mcelogd messagebus netfs network ntpd nfs rpcbind rsyslog syslog udev-post xinetd cpuspeed microcode_ctl sshd; do
     [ -f /etc/init.d/\$chkl ] && chkconfig --level 2345 \$chkl on
done

#change runlevel from 5 to 3
sed -e 's/^id:5:initdefault:/id:3:initdefault:/g' < /etc/inittab > /etc/inittab~
mv /etc/inittab~ /etc/inittab
EOF

    if _k_misc_check_value "$OS_NAME" "rhel6.1" "rhel6.2" "rhel6.3" ; then
        cat << EOF
  echo "alias eth0 igb" > /etc/modprobe.d/igb.conf
  echo "alias eth1 igb" >> /etc/modprobe.d/igb.conf
  [ -f /etc/udev/rules.d/70-persistent-net.rules ] && rm -f /etc/udev/rules.d/70-persistent-net.rules
  [ -f /etc/modprobe.d/mlx4_en.conf ] && rm -f /etc/modprobe.d/mlx4_en.conf
  [ -f /etc/modprobe.d/libmlx4.conf ] && rm -f /etc/modprobe.d/libmlx4.conf
EOF
    else

        cat << EOF
  #configure the NIC driver
  cat /etc/modprobe.conf | grep -v eth[0-9] | grep -v ib[0-9] > /tmp/modprobe.conf~
  echo "alias eth0 igb" >> /tmp/modprobe.conf~
  echo "alias eth1 igb" >> /tmp/modprobe.conf~
  cp -f /tmp/modprobe.conf~ /etc/modprobe.conf

  mods=\$(for mod in \$(ls -l /sys/class/net/*/device/driver | awk -F\> '{print \$2}' ); do
    basename \$mod
  done | uniq )

  if echo \$mods|grep mlx4 >& /dev/null ; then
    for stop in \$mods; do
     echo \$stop | grep mlx4 >&/dev/null && modprobe -r mlx4_en mlx4_core || modprobe -r \$stop
    done
    for start in \$mods; do
     echo \$start | grep mlx4 || modprobe \$start
    done
  fi
EOF
    fi

    cat << EOF
rm -f /etc/sysconfig/network-scripts/ifcfg-eth?

# configure the NICs
$KS_ETH_0
$KS_ETH_1
ks_netmask="255.255.0.0"

if [ -n "\$ks_eth0" -a -n "\$ks_netmask" ]; then
    #mac=\$(ifconfig eth0 | grep "HWaddr" | awk '{print \$5;}')
    echo "# ACE Xtreme-X installation
DEVICE=eth0
BOOTPROTO=none
HWADDR=\$mac
ONBOOT=yes
NETMASK=\$ks_netmask
IPADDR=\$ks_eth0
TYPE=Ethernet
USERCTL=no
IPV6INIT=no
PEERDNS=yes" > /etc/sysconfig/network-scripts/ifcfg-eth0
fi

if [ -n "\$ks_eth1" -a -n "\$ks_netmask" ]; then
    #mac=\$(ifconfig eth1 | grep "HWaddr" | awk '{print \$5;}')
    echo "# ACE Xtreme-X installation
DEVICE=eth1
BOOTPROTO=none
HWADDR=\$mac
EOF

    if [ "$o_eth1" == "1" ]; then
        cat << EOF
ONBOOT=no
EOF
    else
        cat << EOF
ONBOOT=yes
EOF
    fi

    cat << EOF
NETMASK=\$ks_netmask
IPADDR=\$ks_eth1
TYPE=Ethernet
USERCTL=no
IPV6INIT=no
PEERDNS=yes" > /etc/sysconfig/network-scripts/ifcfg-eth1
fi

if ! grep "^ttyS1" /etc/securetty >/dev/null 2>&1 ; then
   echo "ttyS1 " >> /etc/securetty
fi
if ! grep "^ttyS2" /etc/securetty >/dev/null 2>&1 ; then
   echo "ttyS2 " >> /etc/securetty
fi

EOF

    if _k_misc_check_value "$OS_NAME" "rhel6.1" "rhel6.2" "rhel6.3" ; then

        cat << EOF

    echo "\$(sed '17d' /boot/grub/grub.conf) max_loop=256
\$(tail -n 1 /boot/grub/grub.conf)" > /boot/grub/grub.conf.ace
    mv /boot/grub/grub.conf.ace /boot/grub/grub.conf

EOF

    else

        cat << EOF

if [ -d /etc/modprobe.d ]; then
   [ -f /etc/modprobe.d/loop.conf ] && ( grep 256 /etc/modprobe.d/loop.conf >& /dev/null || echo "options loop max_loop=256" > /etc/modprobe.d/loop.conf ) || echo "options loop max_loop=256" > /etc/modprobe.d/loop.conf
else
   grep loop /etc/modprobe.conf | grep 256 >& /dev/null ||   echo "options loop max_loop=256" >> /etc/modprobe.conf
fi

EOF
    fi

}

_k_ks_packages_rhel5x() {
cat << EOF
%packages
@engineering-and-scientific
@development-libs
@editors
@system-tools
@gnome-software-development
@text-internet
@x-software-development
@legacy-network-server
@dns-server
@gnome-desktop
@dialup
@core
@base
@ftp-server
@network-server
@games
@legacy-software-development
$PKG_CLUSTER
#@emacs
@legacy-software-support
@base-x
@graphics
@web-server
@printing
@mail-server
@server-cfg
@sound-and-video
@admin-tools
@development-tools
@graphical-internet
lapack
emacs
createrepo
wireshark-gnome
audit
tftp
mesa-libGLU-devel
talk-server
tftp-server
kexec-tools
x86info
device-mapper-multipath
vnc-server
dhcp
openssl097a
compat-readline43
openmotif22
gtk+
xorg-x11-server-Xnest
xorg-x11-server-Xvfb
xorg-x11-resutils
xorg-x11-xfs-utils
xorg-x11-proto-devel
libsane-hpaio
system-config-boot
system-config-kickstart
imake
ElectricFence
expect
unifdef
tk
$RHEL53_TCL_DEVEL
nfs-utils-lib-devel
libevent-devel
OpenIPMI
OpenIPMI-tools
OpenIPMI-libs
#thunderbird
-sysreport
#Numa
numactl
numactl-devel
#Ethernetonly
net-snmp
net-snmp-devel
net-snmp-libs
#add
libXp-devel
openmotif
openmotif-devel
mkisofs
EOF
}

_k_ks_packages_rhel61() {
   cat << EOF
%packages
@additional-devel
@base
@compat-libraries
@core
@debugging
@basic-desktop
@development
@general-desktop
@graphical-admin-tools
@hardware-monitoring
@infiniband
@internet-browser
@japanese-support
@korean-support
@large-systems
@legacy-unix
@legacy-x
@nfs-file-server
@network-server
@network-file-system-client
@network-tools
@performance
@system-management-snmp
@scientific
@server-platform
@server-platform-devel
@server-policy
@storage-client-multipath
@system-management
@x11
@storage-client-iscsi
libXinerama-devel
xorg-x11-proto-devel
libbonobo-devel
libXau-devel
libgcrypt-devel
popt-devel
libXrandr-devel
libxslt-devel
libaio-devel
gnutls-devel
fuse-devel
mtools
pax
python-dmidecode
kernel-doc
edac-utils
logwatch
glibc-utils
systemtap-client
memtest86+
lslk
systemtap-initscript
gcc-gnat
compat-gcc-34
gcc-java
compat-gcc-34-g77
jpackage-utils
gcc-objc
gcc-objc++
compat-gcc-34-c++
vim-X11
setroubleshoot
lm_sensors
qperf
perftest
compat-dapl
srptools
telnet-server
telnet
tcp_wrappers
xterm
libXmu
dnsmasq
dhcp
tftp
tftp-server
nmap
iptraf
wireshark
sdparm
sg3_utils
-tuned-utils
-tuned
net-snmp-python
net-snmp-perl
atlas
numpy
freeipmi-ipmidetectd
ipmitool
freeipmi
freeipmi-bmc-watchdog
watchdog
-openhpi-subagent
OpenIPMI
-openhpi
-gnome-keyring-devel
tzdata-java
giflib
rhino
java-1.6.0-openjdk
-gnome-desktop-devel
-hmaccalc
-boost-devel
-audit-libs-devel
-gstreamer-devel
binutils-devel
-alsa-lib-devel
-evolution-data-server-devel
-vconfig
-abrt-plugin-mailx
-acpid
-rng-tools
-biosdevname
-dmraid
-hunspell-en
-abrt-cli
microcode_ctl
-fprintd-pam
-abrt-plugin-sosreport
-rfkill
-pinfo
-words
-abrt-addon-kerneloops
-abrt-addon-ccpp
-abrt-cli
-cas
-abrt-addon-python
-rhn-setup-gnome
-eog
-gok
-gnome-media
-gnome-vfs2-smb
-subscription-manager-gnome
-pulseaudio-module-x11
-pulseaudio-module-gconf
-orca
-vino
-gdm-plugin-fingerprint
-rcs
-intltool
-cheese
-gedit
-rhn-setup-gnome
-evince
-PackageKit-gstreamer-plugin
-rhythmbox
-compiz-gnome
-nautilus-sendto
-gnome-bluetooth
-mousetweaks
-scenery-backgrounds
-gvfs-afc
-gnome-user-share
-gvfs-obexftp
-totem-nautilus
-gnote
-nautilus-open-terminal
-file-roller
-totem
-evince-dvi
-gvfs-gphoto2
-seahorse
-gcalctool
-gthumb
-sound-juicer
-brasero-nautilus
-totem-mozplugin
-nspluginwrapper
-samba-client
-cifs-utils
-openswan
-plymouth-system-theme
-subscription-manager-firstboot
-wacomexpresskeys
-spice-vdagent
-xvattr
tk.i686
tk.x86_64
tk-devel.i686
tk-devel.x86_64
tcl.i686
tcl.x86_64
tcl-devel.i686
tcl-devel.x86_64
glibc-devel.i686
glibc-devel.x86_64
infinipath-psm
screen
binutils-devel
hmaccalc
perl-ExtUtils-Embed
xmlto
libblkid.i686
libblkid.x86_64
libuuid.i686
libuuid.x86_64
ncurses-libs.i686
ncurses-libs.x86_64
readline.i686
readline.x86_64
texinfo.x86_64
gd.x86_64
gd.i686
expat.i686
fontconfig.i686
freetype.i686
libX11.i686
libXau.i686
libXpm.i686
libXpm.x86_64
libXpm-devel.i686
libXpm-devel.x86_64
libjpeg.i686
libjpeg.x86_64
libjpeg-devel.i686
libjpeg-devel.x86_64
libpng.i686
libxcb.i686
zlib.i686
libXpm-devel.x86_64
libjpeg-devel.x86_64
net-snmp-devel.x86_64
file-devel.x86_64
lm_sensors-devel.x86_64
rpm-devel.x86_64
tcp_wrappers-devel.x86_64
mailcap.noarch
perl-XML-Parser.x86_64
perl-Compress-Raw-Zlib.x86_64
perl-Compress-Zlib.x86_64
perl-HTML-Parser.x86_64
perl-HTML-Tagset.noarch
perl-IO-Compress-Base.x86_64
perl-IO-Compress-Zlib.x86_64
perl-libwww-perl.noarch
perl-DBI
perl-Net-LibIDN
perl-Text-Iconv
perl-Crypt-PasswdMD5
perl-File-Slurp
perl-Digest-SHA
perl-String-CRC32
perl-Class-Singleton
perl-Locale-Maketext-Simple
perl-Carp-Clan
perl-ExtUtils-CBuilder
perl-IO-String
perl-Parse-CPAN-Meta
perl-Params-Validate
perl-Net-SSLeay
perl-Module-Load
perl-Crypt-SSLeay
perl-XML-LibXML.x86_64
perl-XML-NamespaceSupport.noarch
perl-XML-SAX.noarch
perl-XML-Writer
perl-List-MoreUtils
perl-CPAN
perl-DateTime
perl-libxml-perl
perl-IO-Zlib
perl-XML-XPath
perl-Params-Check
perl-Bit-Vector
perl-IO-Socket-SSL
perl-Log-Message
perl-Date-Calc
perl-Log-Message-Simple
perl-Term-UI
perl-TimeDate
PyXML
bzip2-devel
chrpath
expect
-wpa_supplicant
-NetworkManager
-NetworkManager-gnome
-NetworkManager-glib
-abrt
-amtu
-libcgroup
-libcgroup-devel
-subscription-manager
-openhpi-libs
-audit
-audit-libs
-audit-libs-python
-avahi
-avahi-libs
-avahi-tools
-avahi-glib
-avahi-ui
libstdc++.i686
libstdc++-devel.i686
cpuspeed
cpufrequtils
ksh
zsh
lockdev
lrzsz
minicom
-compat-dapl-1.2.15-2.2.el6.x86_64
-dapl-2.0.25-5.2.el6.x86_64
-ibsim-0.5-4.el6.x86_64
-ibutils-libs-1.5.4-3.el6.x86_64
-ibutils-1.5.4-3.el6.x86_64
-infinipath-psm-1.13-2.el6.x86_64
-libcxgb3-1.3.0-1.el6.x86_64
-libibcm-1.0.5-2.el6.x86_64
-libibmad-1.3.4-1.el6.x86_64
-libibumad-1.3.4-1.el6.x86_64
-libibverbs-1.1.4-2.el6.x86_64
-libibverbs-utils-1.1.4-2.el6.x86_64
-libipathverbs-1.2-2.el6.x86_64
-libmlx4-1.0.1-7.el6.x86_64
-libmthca-1.0.5-7.el6.x86_64
-libnes-1.1.1-1.el6.x86_64
-librdmacm-1.0.10-2.el6.x86_64
-librdmacm-utils-1.0.10-2.el6.x86_64
-opensm-libs-3.3.5-1.el6.x86_64
-perftest-1.2.3-3.el6.x86_64
-qperf-0.4.6-2.el6.x86_64
-rds-tools-2.0.4-3.el6.x86_64
-srptools-0.0.4-9.el6.x86_64
genisoimage
EOF
}

_k_ks_packages_rhel62() {
    cat << EOF
%packages
@additional-devel
@base
@client-mgmt-tools
@compat-libraries
@core
@debugging
@basic-desktop
@desktop-debugging
@desktop-platform
@desktop-platform-devel
@development
@directory-client
@directory-server
@eclipse
@emacs
@fonts
@general-desktop
@graphical-admin-tools
@graphics
@hardware-monitoring
@input-methods
@internet-browser
@java-platform
@large-systems
@legacy-unix
@legacy-x
@nfs-file-server
@network-server
@network-file-system-client
@network-tools
@php
@performance
@perl-runtime
@print-client
@remote-desktop-clients
@system-management-snmp
@scientific
@security-tools
@server-platform
@server-platform-devel
@server-policy
@system-management
@system-admin-tools
@tex
@technical-writing
@virtualization
@virtualization-client
@virtualization-platform
@virtualization-tools
@x11
libcap-devel
libXinerama-devel
openmotif-devel
net-snmp-devel
xz-devel
papi-devel
libtopology-devel
libuuid-devel
libblkid-devel
libXmu-devel
unique-devel
xorg-x11-proto-devel
startup-notification-devel
tcl-devel
libudev-devel
numactl-devel
libgnomeui-devel
libbonobo-devel
libtiff-devel
junit
SDL-devel
libXau-devel
tcp_wrappers-devel
libgcrypt-devel
popt-devel
libusb-devel
libdrm-devel
libXrandr-devel
libxslt-devel
tk-devel
libXpm-devel
expat-devel
e2fsprogs-devel
libglade2-devel
libaio-devel
gnutls-devel
fuse-devel
libXaw-devel
libhugetlbfs-devel
mtools
cpufrequtils
pax
python-dmidecode
uuidd
oddjob
kernel-doc
tunctl
sgpio
genisoimage
x86info
edac-utils
ncurses-term
logwatch
zsh
wodim
ftp
glibc-utils
lslk
systemtap-initscript
tigervnc-server
abrt-gui
systemtap-grapher
desktop-file-utils
ant
libstdc++-docs
gcc-gnat
expect
cmake
imake
rpmdevtools
compat-gcc-34
gcc-java
compat-gcc-34-g77
jpackage-utils
mercurial
gcc-objc
rpmlint
gcc-objc++
compat-gcc-34-c++
nasm
certmonger
openldap-clients
pam_krb5
krb5-workstation
ypserv
migrationtools
openldap-servers
gconf-editor
vim-X11
system-config-lvm
audit-viewer
setroubleshoot
policycoreutils-gui
netpbm-progs
ImageMagick
dcraw
edac-utils
lm_sensors
dump
telnet-server
telnet
tcp_wrappers
ncompress
tftp
ksh
openmotif
xterm
libXmu
libXp
openmotif22
bind
quagga
syslinux
dnsmasq
radvd
dhcp
tftp-server
freeradius
cachefilesd
ebtables
arpwatch
nmap
stunnel
iptstate
iptraf
dropwatch
wireshark
arptables_jf
sdparm
papi
sg3_utils
perl-DBD-SQLite
perl-Date-Manip
tigervnc
numpy
atlas
freeipmi-ipmidetectd
ipmitool
freeipmi
freeipmi-bmc-watchdog
watchdog
OpenIPMI
symlinks
rrdtool
mc
screen
tree
mgetty
hardlink
expect
crypto-utils
scrub
vlock
texinfo
qemu-kvm-tools
libvirt-snmp
fence-virtd-serial
fence-virtd-multicast
libvirt-java
libvirt-cim
fence-virtd-libvirt
libvirt-qmf
perl-Sys-Virt
libguestfs-java
virt-v2v
libguestfs-tools
libguestfs-mount
minicom
tk.i686
tk-devel.i686
tcl.i686
tcl-devel.i686
glibc-devel.i686
libblkid.i686
libuuid.i686
ncurses-libs.i686
readline.i686
gd.i686
expat.i686
fontconfig.i686
freetype.i686
libX11.i686
libXau.i686
libXpm.i686
libXpm-devel.i686
libjpeg.i686
libjpeg-devel.i686
libpng.i686
libxcb.i686
zlib.i686
perl-XML-Parser.x86_64
perl-Compress-Raw-Zlib.x86_64
perl-Compress-Zlib.x86_64
perl-HTML-Parser.x86_64
perl-HTML-Tagset.noarch
perl-IO-Compress-Base.x86_64
perl-IO-Compress-Zlib.x86_64
perl-libwww-perl.noarch
perl-DBI
perl-Net-LibIDN
perl-Text-Iconv
perl-Crypt-PasswdMD5
perl-File-Slurp
perl-Digest-SHA
perl-String-CRC32
perl-Class-Singleton
perl-Locale-Maketext-Simple
perl-Carp-Clan
perl-ExtUtils-CBuilder
perl-IO-String
perl-Parse-CPAN-Meta
perl-Params-Validate
perl-Net-SSLeay
perl-Module-Load
perl-Crypt-SSLeay
perl-XML-LibXML.x86_64
perl-XML-NamespaceSupport.noarch
perl-XML-SAX.noarch
perl-XML-Writer
perl-List-MoreUtils
perl-CPAN
perl-DateTime
perl-libxml-perl
perl-IO-Zlib
perl-XML-XPath
perl-Params-Check
perl-Bit-Vector
perl-IO-Socket-SSL
perl-Log-Message
perl-Date-Calc
perl-Log-Message-Simple
perl-Term-UI
perl-TimeDate
libstdc++.i686
libstdc++-devel.i686
-compat-opensm-libs
-compat-openmpi-psm
-compat-openmpi
-system-config-kickstart
-anaconda
-NetworkManager-gnome
-NetworkManager-openswan
-NetworkManager
-subscription-manager-firstboot
-subscription-manager-gnome
-subscription-manager
-rhn-setup-gnome
-yum-rhn-plugin
-rhn-check
-rhn-setup
-rhnsd
EOF
}

#_k_ks_close(){
#    local help=" Library ks's closing function
#Usage) ${FUNCNAME} "
#    [  "${FUNCNAME}_${_K_XCODE_HELP}" == "$1" ] && _k_help  && return 0
#    ### close library code here ###
#}


#_k_ks_example(){
#    local help="help
#Usage) ${FUNCNAME} "
#    [  "${FUNCNAME}_${_K_XCODE_HELP}" == "$1" ] && _k_help  && return 0
#    ### your code here ###
#}

     
